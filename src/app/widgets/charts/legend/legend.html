<div
     layout="row" layout-align="start start" layout-wrap
    class="chart-legend">

    <!--Перебор всех возможных layout-ов. В каждый момент времени виден должен быть только один-->
    <div ng-repeat="layout in layouts" flex
        layout="row" layout-align="start start" layout-wrap
        ng-if="layout.visible">
        
        <!--Перебор столбцов -->
        <div layout="column" layout-align="start start"
            ng-repeat="items in layout.legends"
            ng-style="layout.style" flex="grow">
    
            <div layout="column" layout-align="start start"
                 ng-repeat="item in items"
                 >
                <div class="legend-item no-outline no-select"
                      layout="row" layout-align="start center"
                      ng-class="{'selectable': selectable, 'disabled': !!disabled}"
                      ng-click="selectable && !disabled ? itemClick(item) : null"
                      ng-mouseenter="highlightable ? highlightItem(item) : null"
                      ng-mouseleave="highlightable ? unhighlightItem(item) : null">
                    <div flex="none" class="legend-item-color"
                    ng-style="getPointStyles(item)"></div>
                    <div class="legend-item-text">{{item.name}}</div>
                </div>
                <div ng-if="item.lists && item.selected"
                class="sublegend">
                    <legend-dir legend="item.lists"
                                selectable="selectable"
                                highlightable="highlightable"
                                selected-color="selectedColor"
                                highlighted-color="highlightedColor"
                                disabled="disabled"
                                columnsLayout="{'any':1}"
                                ></legend-dir>
                </div>
            </div>
        </div>
        
    </div>


</div>


